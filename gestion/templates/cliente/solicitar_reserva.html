{% extends 'base.html' %}

{% block title %}Solicitar Reserva - Las Cabañitas{% endblock %}

{% block content %}
<h1 class="page-title">Solicitar Nueva Reserva</h1>

<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="id_cabaña">Cabaña:</label>
        {{ form.cabaña }}
    </div>

    <div class="form-group">
        <label for="id_fechaInicio">Fecha de Inicio:</label>
        {{ form.fechaInicio }}
    </div>

    <div class="form-group">
        <label for="id_fechaFin">Fecha de Fin:</label>
        {{ form.fechaFin }}
    </div>

    <div class="form-group">
        <label for="id_numPersonas">Número de Personas:</label>
        {{ form.numPersonas }}
    </div>

    <div class="form-group">
        <label for="id_comentarios">Comentarios (opcional):</label>
        {{ form.comentarios }}
    </div>

    <button type="submit" class="btn btn-success">Solicitar Reserva</button>
    <a href="{% url 'portal_cliente' %}" class="btn">Cancelar</a>
</form>

<div class="card mt-30">
    <h3>Cabañas Disponibles</h3>
    {% if cabañas %}
    <div class="alert alert-info">
        <p><strong>Nota:</strong> Las cabañas en mantenimiento no aparecen en esta lista.
        Si su cabaña preferida no está disponible, seleccione una alternativa o contacte al administrador.</p>
    </div>
    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Capacidad</th>
                <th>Precio por Noche</th>
                <th>Estado</th>
                <th>Mantenimiento</th>
            </tr>
        </thead>
        <tbody>
            {% for cabaña in cabañas %}
            <tr>
                <td>{{ cabaña.nombre }}</td>
                <td>{{ cabaña.capacidad }} personas</td>
                <td>${{ cabaña.precioNoche }}</td>
                <td>
                    <span class="status-badge-inline status-{{ cabaña.estado }}">
                        {{ cabaña.get_estado_display }}
                    </span>
                </td>
                <td>
                    {% if cabaña.estado == 'mantenimiento' %}
                        <span class="error-text">⚠️ En Mantenimiento</span>
                    {% else %}
                        <span class="success-text">✓ Disponible</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-warning">
        <p>No hay cabañas disponibles en este momento. Por favor contacte al administrador para más información.</p>
    </div>
    {% endif %}
</div>
{% endblock %}

