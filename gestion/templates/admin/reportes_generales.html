{% extends 'base.html' %}

{% block title %}Reportes Generales - Las Cabañitas{% endblock %}

{% block content %}
<h1 class="page-title">Reportes Generales</h1>

<div class="card">
    <h3>Ocupación por Mes</h3>
    <table>
        <thead>
            <tr>
                <th>Mes</th>
                <th>Reservas</th>
            </tr>
        </thead>
        <tbody>
            {% for mes, cantidad in ocupacion_mes.items %}
            <tr>
                <td>{{ mes }}</td>
                <td>{{ cantidad }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h3>Ingresos por Mes</h3>
    <table>
        <thead>
            <tr>
                <th>Mes</th>
                <th>Ingresos</th>
            </tr>
        </thead>
        <tbody>
            {% for mes, ingreso in ingresos_mes.items %}
            <tr>
                <td>{{ mes }}</td>
                <td>${{ ingreso|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h3>Encuestas de Satisfacción</h3>
    <p><strong>Total de Encuestas:</strong> {{ total_encuestas }}</p>
    <p><strong>Calificación Promedio:</strong> {{ promedio_calificacion }} / 5.0</p>
</div>

<div class="card">
    <h3>Cabañas Más Reservadas</h3>
    {% if cabañas_populares %}
        <table>
            <thead>
                <tr>
                    <th>Cabaña</th>
                    <th>Número de Reservas</th>
                </tr>
            </thead>
            <tbody>
                {% for cabaña in cabañas_populares %}
                <tr>
                    <td>{{ cabaña.nombre }}</td>
                    <td>{{ cabaña.num_reservas }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No hay datos disponibles.</p>
    {% endif %}
</div>

<div class="mt-30">
    <a href="{% url 'dashboard_admin' %}" class="btn">Volver al Dashboard</a>
</div>
{% endblock %}

